<div class="container my-5">
  <h1><%= @plan.name %></h1>
  <div class="progress-bar" data-controller="progress-bar" data-progress-bar-target="progress" data-progress-bar-plans-value="<%=@plan.tasks.size%>"data-progress-bar-completedplans-value="<%=@plan.tasks.select{|task| task.completion}.size%>">
    <progress value="75" min="0" max="100" style="visibility:hidden;height:0;width:0;" data-progress-bar-target="circle">75%</progress>
  </div>

  <div class="m-3">
    <p><%= @plan.description %>
    <%= link_to edit_plan_path(@plan), class: 'btn text-warning px-2' do %>
      <i class="fa-solid fa-rotate"></i>
    <% end %>
    <%= link_to plan_path(@plan),
                data: { turbo_method: :delete, turbo_confirm: "Are you sure?" },
                class: 'btn text-danger px-2' do %>
      <i class="fa-solid fa-xmark"></i>
    <% end %>
    </p>
    <div class="card-body">
      <% @plan.tasks.each do |task|  %>
        <p class="ms-5 d-flex flex-row">
          <p class="ms-5  tasks">
            <bdi>
              <%= task.activity %>
              <%= task.due_date %>
            </bdi>
            <%= link_to edit_task_path(task), class: 'btn text-warning px-2' do %>
              <i class="fa-solid fa-rotate"></i>
            <% end %>
            <%= link_to task_path(task), class: 'btn text-danger px-2',
                        data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } do %>
              <i class="fa-solid fa-xmark"></i>
            <% end %>
          </p>
        </p>
      <% end %>
      <%= link_to new_plan_task_path(@plan),class: 'btn font-turquoise px-2' do %>
        <i class="fa-solid fa-plus">&nbsp new task</i>
      <% end %>
    </div>
  </div>
  <div class="m-2">
  <%= link_to plans_path, class: 'btn font-skyblue px-2' do %>
    <i class="fa-solid fa-chevron-left">&nbsp back</i>
  <% end %>
  </div>
</div>
